(() => {
  const translations = {
    vi: {
      page_title: 'Theo dõi giá vàng',
      app_title: 'Theo dõi giá vàng',
      signup_title: 'Đăng ký nhận cập nhật giá vàng',
      signup_desc:
        'Nhận cập nhật giá vàng mỗi ngày qua email, bao gồm giá hôm nay và lịch sử 10 ngày gần nhất',
      email_label: 'Địa chỉ email',
      email_hint: 'Vui lòng nhập email hợp lệ',
      signup_btn: 'Đăng ký',
      today_title: 'Giá vàng hôm nay tại TP.HCM',
      col_date: 'Ngày',
      col_buy: 'Mua vào (VND/lượng)',
      col_sell: 'Bán ra (VND/lượng)',
      today_summary_1: 'Giá vàng DOJI TP.HCM hôm nay:',
      today_summary_2: 'mua vào,',
      today_summary_3: 'bán ra (đơn vị: lượng).',
      history_title: 'Giá vàng TP.HCM trong 10 ngày gần nhất',
      alert_title: 'Cập nhật ngưỡng cảnh báo',
      alert_desc:
        'Nhập email đã đăng ký và đặt ngưỡng Min/Max để nhận cảnh báo khi giá vượt mức.',
      alert_email: 'Địa chỉ email',
      alert_min: 'Ngưỡng tối thiểu (VND)',
      alert_max: 'Ngưỡng tối đa (VND)',
      alert_min_ph: 'VD: 168000000',
      alert_max_ph: 'VD: 175000000',
      alert_field: 'Theo dõi theo giá',
      alert_sell: 'Giá bán',
      alert_buy: 'Giá mua',
      alert_both: 'Cả mua và bán',
      alert_btn: 'Cập nhật ngưỡng',
      paragraphs_title: 'Thông tin về thị trường vàng Việt Nam',
      p1_title: 'Vàng 9999 (24K) là gì?',
      p1_body:
        'Vàng 9999 là loại vàng có độ tinh khiết rất cao, thường được dùng làm vàng miếng, vàng nhẫn trơn và tích lũy dài hạn. Tại Việt Nam, nhóm này được quan tâm vì dễ mua - bán và giá bám sát thị trường.',
      p2_title: 'Vàng 18K/22K trong trang sức',
      p2_body:
        'Vàng trang sức thường là hợp kim để tăng độ bền, giúp dễ chế tác và giữ form tốt khi đeo hằng ngày. Mức độ tinh khiết sẽ khác nhau tùy loại vàng và thương hiệu.',
      p3_title: 'Cách niêm yết & đơn vị phổ biến',
      p3_body:
        'Ở Việt Nam, giá vàng thường được niêm yết theo lượng, chỉ hoặc gram. Khi mua - bán sẽ có chênh lệch giữa giá mua vào và bán ra, tùy theo từng thương hiệu và thời điểm.',
      p4_title: 'Vàng như một kênh tích lũy',
      p4_body:
        'Vàng thường được xem là kênh tích lũy an toàn trong dài hạn. Nhiều gia đình giữ vàng như một khoản dự phòng hoặc tài sản chuyển giao giữa các thế hệ.',
      p4_jewelry: 'Trang sức',
      p4_jewelry_body:
        'Phổ biến trong các dịp cưới hỏi và quà tặng quan trọng.',
      p4_bullion: 'Vàng miếng/nhẫn',
      p4_bullion_body: 'Dễ cất giữ và thanh khoản cao khi cần.',
      p4_coins: 'Vàng trang sức theo nhu cầu',
      p4_coins_body: 'Kết hợp yếu tố làm đẹp và tích lũy.',
      p4_exchange: 'Đa dạng thương hiệu',
      p4_exchange_body: 'SJC, DOJI, PNJ, Phú Quý... tùy khu vực và nhu cầu.',
      p5_title: 'Mẹo trước khi mua vàng',
      p5_1: '1. Theo dõi giá:',
      p5_1_body: 'Kiểm tra giá cập nhật trước khi mua. Bạn có thể dùng',
      p5_1_link: 'Đăng ký',
      p5_1_tail: 'để nhận thông báo hằng ngày.',
      p5_2: '2. Chọn nơi uy tín:',
      p5_2_body:
        'Mua tại cửa hàng/đại lý chính hãng để đảm bảo chất lượng.',
      p5_3: '3. Xem chênh lệch mua - bán:',
      p5_3_body:
        'Chênh lệch càng thấp càng dễ tối ưu lợi nhuận khi giao dịch.',
      p5_4: '4. Giữ hóa đơn:',
      p5_4_body: 'Hóa đơn giúp bạn bán lại thuận lợi hơn.',
      p5_5: '5. Đa dạng hóa:',
      p5_5_body:
        'Không nên dồn toàn bộ vốn vào vàng; hãy cân bằng với các kênh khác.',
      p6_title: 'Yếu tố ảnh hưởng giá vàng',
      p6_body:
        'Giá vàng trong nước thường biến động theo giá thế giới, tỷ giá, cung - cầu và thời điểm trong năm. Vì vậy, theo dõi biến động thường xuyên sẽ giúp bạn chọn được thời điểm giao dịch phù hợp.',
      footer: 'Theo dõi giá vàng 2026',
    },
    en: {
      page_title: 'Gold Price Tracker',
      app_title: 'Gold Price Tracker',
      signup_title: 'Sign up for gold price updates',
      signup_desc:
        'Get daily gold price updates by email, including today’s price and the last 10 days',
      email_label: 'Email address',
      email_hint: 'Please enter a valid email',
      signup_btn: 'Sign up',
      today_title: "Today's gold price in HCMC",
      col_date: 'Date',
      col_buy: 'Buy (VND/tael)',
      col_sell: 'Sell (VND/tael)',
      today_summary_1: "Today's DOJI HCMC price:",
      today_summary_2: 'buy,',
      today_summary_3: 'sell (unit: tael).',
      history_title: 'HCMC gold prices in the last 10 days',
      alert_title: 'Update alert thresholds',
      alert_desc:
        'Enter your registered email and set Min/Max thresholds to receive alerts.',
      alert_email: 'Email address',
      alert_min: 'Minimum threshold (VND)',
      alert_max: 'Maximum threshold (VND)',
      alert_min_ph: 'e.g. 168000000',
      alert_max_ph: 'e.g. 175000000',
      alert_field: 'Track by price',
      alert_sell: 'Sell price',
      alert_buy: 'Buy price',
      alert_both: 'Both buy & sell',
      alert_btn: 'Update thresholds',
      paragraphs_title: 'Vietnam gold market overview',
      p1_title: 'What is 24K (9999) gold?',
      p1_body:
        '9999 gold is highly pure and commonly used for bars and long-term saving. It’s popular in Vietnam for its liquidity and price tracking.',
      p2_title: '18K/22K gold in jewelry',
      p2_body:
        'Jewelry gold is often alloyed for durability and daily wear. Purity varies by type and brand.',
      p3_title: 'Pricing & common units',
      p3_body:
        'In Vietnam, prices are quoted per tael, chi, or gram. The buy/sell spread depends on brand and time.',
      p4_title: 'Gold as a savings channel',
      p4_body:
        'Gold is seen as a safe long-term savings asset. Many families keep gold as a reserve or legacy asset.',
      p4_jewelry: 'Jewelry',
      p4_jewelry_body: 'Popular for weddings and meaningful gifts.',
      p4_bullion: 'Bars/rings',
      p4_bullion_body: 'Easy to store and highly liquid.',
      p4_coins: 'Jewelry by demand',
      p4_coins_body: 'Combines beauty and saving value.',
      p4_exchange: 'Popular brands',
      p4_exchange_body: 'SJC, DOJI, PNJ, Phú Quý and more.',
      p5_title: 'Tips before buying gold',
      p5_1: '1. Track prices:',
      p5_1_body: 'Check current prices before buying. You can',
      p5_1_link: 'Sign up',
      p5_1_tail: 'to receive daily alerts.',
      p5_2: '2. Buy from trusted dealers:',
      p5_2_body: 'Choose reputable stores to ensure quality.',
      p5_3: '3. Watch the spread:',
      p5_3_body: 'Lower spread helps optimize returns.',
      p5_4: '4. Keep invoices:',
      p5_4_body: 'Invoices make resale easier.',
      p5_5: '5. Diversify:',
      p5_5_body: 'Avoid putting all funds into gold.',
      p6_title: 'Factors affecting gold prices',
      p6_body:
        'Domestic prices follow global prices, FX rates, supply-demand, and seasonality. Track changes to pick good timing.',
      footer: 'Gold Price Tracker 2026',
    },
  };

  function initTranslation() {
    const elements = document.querySelectorAll('[data-i18n]');
    const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
    const langToggle = document.getElementById('lang-toggle');

    function applyLang(lang) {
    const dict = translations[lang] || translations.vi;
    elements.forEach((el) => {
      const key = el.getAttribute('data-i18n');
      if (key && dict[key]) {
        el.textContent = dict[key];
      }
    });
    placeholders.forEach((el) => {
      const key = el.getAttribute('data-i18n-placeholder');
      if (key && dict[key]) {
        el.setAttribute('placeholder', dict[key]);
      }
    });
    if (langToggle) {
      langToggle.textContent = lang === 'vi' ? 'EN' : 'VI';
    }
    if (dict.page_title) {
      document.title = dict.page_title;
    }
    document.documentElement.lang = lang;
    localStorage.setItem('lang', lang);
    }

    if (langToggle) {
      langToggle.addEventListener('click', () => {
        const current = localStorage.getItem('lang') || 'vi';
        const next = current === 'vi' ? 'en' : 'vi';
        applyLang(next);
      });
    }

    const initial = localStorage.getItem('lang') || 'vi';
    applyLang(initial);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTranslation);
  } else {
    initTranslation();
  }
})();
